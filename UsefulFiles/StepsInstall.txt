How to install EnergyScope multi-cell and CECI cluster (nic5) :

Download Ampl and associated license at : https://dox.uliege.be/index.php/s/8XbHoGTHf9WKmxZ. Name you folder "AMPL".

Create a CECI account. Info about how to open an account at : https://www.campus.uliege.be/cms/c_12761924/fr/nic5.

Upload your AMPL folder on your nic5 account. Put it in a relevant repository. For me, I created a folder "Programms" and put my "AMPL" folder in it.

On the cluster, navigate to your repository 

$ cd Programms/AMPL

and change the access type of the executable file by typing in the command line:

$ chmod 755 ampl
$ chmod 755 cplex

Load relevant release :

$ module load releases/2021a

Load corresponding python version and useful package (python, scipy and matplotlib) :

$ module load Python/3.9.5-GCCcore-10.3.0 SciPy-bundle/2021.05-foss-2021a matplotlib/3.4.2-foss-2021a

Create virtual environment to download package that are not preloaded on nic5 :

$ virtualenv ~/energyscope_venv --system-site-packages

Activate the virtual environment :

$ source ~/energyscope_venv/bin/activate

Load the required packages :

$ pip install amplpy
$ pip install pvlib
$ pip install oemof.thermal
$ pip uninstall oemof.solph
$ pip install --upgrade oemof.solph==0.4.5

Install EnergyScope package :

$ pip install -e ~/Stage/EnergyScope_multi_cells


Exemple of slurmscript for automation of the module loading process. Since these module are only loaded from nic5, they are not installed in the virtual environment and need to be loaded every time during the session executing the job. Also, your AMPL folder need to be added to the session's PATH variable (for me via the command "export PATH=$PATH:/home/users/j/j/jjacq/Programs/AMPL" in the script).

#!/bin/bash -l
#SBATCH --job-name=Transition_095
#SBATCH --output=out_095_Transition.txt
#SBATCH --time=0-00:13:0 # dd-hh:mm:ss
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=6
#SBATCH --mem-per-cpu=1024 # megabytes
#SBATCH --partition=batch

module load releases/2021a
module load Python/3.9.5-GCCcore-10.3.0 
module load SciPy-bundle/2021.05-foss-2021a
module load matplotlib/3.4.2-foss-2021a

source ~/energyscope_venv/bin/activate

export PATH=$PATH:/home/users/j/j/jjacq/Programs/AMPL

cd /home/users/j/j/jjacq/Stage/EnergyScope_multi_cells/scripts

python run_esmc.py